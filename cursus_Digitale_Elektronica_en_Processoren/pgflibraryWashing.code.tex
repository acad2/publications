%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% This file is an extension library of PGF/Tikz.
%%%
%%% This library can be used to typeset symbols related to washing/ironing/... things.
%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



% Copyright 2014 by Willem Van Onsem
%
% This file may be distributed and/or modified under the GNU General Public License.

\pgfdeclareshape{washing} {

  \savedanchor\centerpoint{
    \pgf@x=.5\wd\pgfnodeparttextbox
    \pgf@y=.5\ht\pgfnodeparttextbox
    \advance\pgf@y by-.5\dp\pgfnodeparttextbox
  } 
  \saveddimen\halfwidth{%
    \pgfmathsetlength{\pgf@xb}{\pgfkeysvalueof{/pgf/minimum width}}%  
    \pgf@x=0.5\pgf@xb
  }
  \saveddimen\halfheight{
    \pgfmathsetlength{\pgf@yb}{\pgfkeysvalueof{/pgf/minimum height}}%  
    \pgf@x=0.5\pgf@yb
  }
  \saveddimen\radius{%
    \pgfmathsetlength{\pgf@xb}{\pgfkeysvalueof{/pgf/minimum width}}%  
    \pgfmathsetlength{\pgf@yb}{\pgfkeysvalueof{/pgf/minimum height}}%  
    \pgf@x=.5\pgf@xb%
    \pgf@x=.5\pgf@yb%
  }

  \anchor{center}{\centerpoint}
  \anchor{mid}{\centerpoint\pgfmathsetlength\pgf@y{.5ex}}
  \anchor{base}{\centerpoint\pgf@y=0pt}
  \anchor{north}{\centerpoint\advance\pgf@y by\halfheight}
  \anchor{south}{\centerpoint\advance\pgf@y by-\halfheight}
  \anchor{west}{\centerpoint\advance\pgf@x by-\halfwidth}
  \anchor{east}{\centerpoint\advance\pgf@x by\halfwidth}

  \backgroundpath{
	\pgfutil@tempdima=\halfwidth
	\pgfutil@tempdimb=\halfheight
	\centerpoint
    \advance\pgf@x by -0.91\pgfutil@tempdima
    \advance\pgf@y by 0.35\pgfutil@tempdimb
    \pgfpathmoveto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \advance\pgf@x by 0.91\pgfutil@tempdima
    \advance\pgf@y by 0.35\pgfutil@tempdimb
    \pgfpathlineto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \advance\pgf@x by \halfwidth
    \advance\pgf@y by \halfheight
    \pgfpathmoveto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \advance\pgf@x by 0.70\pgfutil@tempdima
    \advance\pgf@y by -\halfheight
    \pgfpathlineto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \advance\pgf@x by -0.70\pgfutil@tempdima
    \advance\pgf@y by -\halfheight
    \pgfpathlineto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \advance\pgf@x by -\halfwidth
    \advance\pgf@y by \halfheight
    \pgfpathlineto{\pgfpoint{\pgf@x}{\pgf@y}}
  }
}

\pgfdeclareshape{drying} {

  \savedanchor\centerpoint{
    \pgf@x=.5\wd\pgfnodeparttextbox
    \pgf@y=.5\ht\pgfnodeparttextbox
    \advance\pgf@y by-.5\dp\pgfnodeparttextbox
  } 
  \saveddimen\halfwidth{%
    \pgfmathsetlength{\pgf@xb}{\pgfkeysvalueof{/pgf/minimum width}}%  
    \pgf@x=0.5\pgf@xb
  }
  \saveddimen\halfheight{
    \pgfmathsetlength{\pgf@yb}{\pgfkeysvalueof{/pgf/minimum height}}%  
    \pgf@x=0.5\pgf@yb
  }
  \saveddimen\radius{%
    \pgfmathsetlength{\pgf@xb}{\pgfkeysvalueof{/pgf/minimum width}}%  
    \pgfmathsetlength{\pgf@yb}{\pgfkeysvalueof{/pgf/minimum height}}%  
    \pgf@x=.5\pgf@xb%
    \pgf@x=.5\pgf@yb%
  }

  \anchor{center}{\centerpoint}
  \anchor{mid}{\centerpoint\pgfmathsetlength\pgf@y{.5ex}}
  \anchor{base}{\centerpoint\pgf@y=0pt}
  \anchor{north}{\centerpoint\advance\pgf@y by\halfheight}
  \anchor{south}{\centerpoint\advance\pgf@y by-\halfheight}
  \anchor{west}{\centerpoint\advance\pgf@x by-\halfwidth}
  \anchor{east}{\centerpoint\advance\pgf@x by\halfwidth}

  \backgroundpath{
	\pgfutil@tempdima=\radius%
    \pgfpathcircle{\centerpoint}{\pgfutil@tempdima}
    \centerpoint
    \advance\pgf@x by \halfwidth
    \advance\pgf@y by \halfheight
    \pgfpathmoveto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \advance\pgf@x by \halfwidth
    \advance\pgf@y by -\halfheight
    \pgfpathlineto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \advance\pgf@x by -\halfwidth
    \advance\pgf@y by -\halfheight
    \pgfpathlineto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \advance\pgf@x by -\halfwidth
    \advance\pgf@y by \halfheight
    \pgfpathlineto{\pgfpoint{\pgf@x}{\pgf@y}}
    \pgfpathclose
  }
}

\pgfdeclareshape{ironing} {

  \savedanchor\centerpoint{
    \pgf@x=.5\wd\pgfnodeparttextbox
    \pgf@y=.5\ht\pgfnodeparttextbox
    \advance\pgf@y by-.5\dp\pgfnodeparttextbox
  } 
  \saveddimen\halfwidth{%
    \pgfmathsetlength{\pgf@xb}{\pgfkeysvalueof{/pgf/minimum width}}%  
    \pgf@x=0.5\pgf@xb
  }
  \saveddimen\halfheight{
    \pgfmathsetlength{\pgf@yb}{\pgfkeysvalueof{/pgf/minimum height}}%  
    \pgf@x=0.5\pgf@yb
  }
  \saveddimen\radius{%
    \pgfmathsetlength{\pgf@xb}{\pgfkeysvalueof{/pgf/minimum width}}%  
    \pgfmathsetlength{\pgf@yb}{\pgfkeysvalueof{/pgf/minimum height}}%  
    \pgf@x=.5\pgf@xb%
    \pgf@x=.5\pgf@yb%
  }

  \anchor{center}{\centerpoint}
  \anchor{mid}{\centerpoint\pgfmathsetlength\pgf@y{.5ex}}
  \anchor{base}{\centerpoint\pgf@y=0pt}
  \anchor{north}{\centerpoint\advance\pgf@y by\halfheight}
  \anchor{south}{\centerpoint\advance\pgf@y by-\halfheight}
  \anchor{west}{\centerpoint\advance\pgf@x by-\halfwidth}
  \anchor{east}{\centerpoint\advance\pgf@x by\halfwidth}
  \anchor{midwest}{\centerpoint\pgfutil@tempdima=\halfwidth\advance\pgf@x by-0.85\pgfutil@tempdima}

  \backgroundpath{
	\pgfutil@tempdima=\halfwidth
	\pgfutil@tempdimb=\halfheight
	\centerpoint
    \advance\pgf@x by -0.70\pgfutil@tempdima
    \advance\pgf@y by \halfheight
    \pgfpathmoveto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \advance\pgf@x by 0.70\pgfutil@tempdima
    \advance\pgf@y by \halfheight
    \pgfpathlineto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \advance\pgf@x by \halfwidth
    \advance\pgf@y by -\halfheight
    \pgfpathlineto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \advance\pgf@x by -\halfwidth
    \advance\pgf@y by -\halfheight
    \pgfpathlineto{\pgfpoint{\pgf@x}{\pgf@y}}
    \centerpoint
    \pgfpathcurveto{\pgf@anchor@ironing@midwest}{\pgf@anchor@ironing@midwest}{\centerpoint}
    \centerpoint
    \advance\pgf@x by 0.85\pgfutil@tempdima
    \pgfpathlineto{\pgfpoint{\pgf@x}{\pgf@y}}
  }
}