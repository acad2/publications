\usepackage[cm]{fullpage}
\usepackage[ruled,vlined]{algorithm2e}
\usepackage{amsmath,amsthm,amsfonts,hyperref,makeidx,booktabs,tikz,bnf,qtree}
\usetikzlibrary{arrows,positioning,automata}

\newtheorem{defin}{Definition}
\newtheorem{therm}{Theorem}
\newcommand{\ab}{}
\newenvironment{df}[2][]{\renewcommand{\sb}{#2}\renewcommand{\ab}{#1}\ifx&#1&\begin{defin}[#2]\else\begin{defin}[#2 (#1)]\foreach \x in {#1}{\index{\x|see{#2}}}\fi\index{#2|textbf}\label{dfn:#2}}{\end{defin}}
\newenvironment{tm}[2][]{\renewcommand{\sb}{#2}\renewcommand{\ab}{#1}\ifx&#1&\begin{therm}[#2]\else\begin{therm}[#2 (#1)]\foreach \x in {#1}{\index{\x|see{#2}}}\fi\index{#2|textbf}\label{dfn:#2}}{\end{therm}}
\newcommand{\nlp}{natural language processing}
\newcommand{\alnlp}{analysis level in \nlp{}}
\newcommand{\pnc}{pronunciation}
\newcommand{\pos}{part-of-speech}
\newcommand{\mpcl}{morphological}
\newcommand{\app}{application}
\newcommand{\tcq}{technique}
\newcommand{\stc}[1]{``\emph{#1}''}
\newcommand{\flv}[1]{\index{#1}\hyperref[dfn:#1]{\emph{#1}}}%reference to another definition
\newcommand{\flvb}[1]{\index{#1 [\sb]|textbf}\emph{#1}}%\ifx&\ab{}&\else\index{#1 [\ab]|textbf}\fi %subdefinition with boldface index
\newcommand{\postag}[1]{\index{Tags!#1|textbf}\label{pos:#1}\texttt{#1}}
\newcommand{\tagref}[1]{\mbox{\texttt{#1}}}

\newcommand{\brak}[1]{\ensuremath{\left(#1\right)}}
\newcommand{\tupl}[1]{\ensuremath{\left\langle#1\right\rangle}}
\newcommand{\fbrk}[1]{\ensuremath{\left[#1\right]}}
\newcommand{\accl}[1]{\ensuremath{\left\{#1\right\}}}
\newcommand{\abs}[1]{\ensuremath{\left|#1\right|}}
\newcommand{\dabs}[1]{\ensuremath{\left\|#1\right\|}}
\newcommand{\fun}[2]{\ensuremath{#1\brak{#2}}}
\newcommand{\funm}[3][]{\fun{\mbox{#2}_{#1}}{#3}}
\newcommand{\funf}[2]{\ensuremath{#1\fbrk{#2}}}
\newcommand{\klee}[1]{\ensuremath{#1^{\star}}}
\newcommand{\transpose}[1]{\ensuremath{#1^{\top}}}
\newcommand{\truet}{\mbox{\textbf{true}}}
\newcommand{\guard}[1]{\left\{\begin{array}{ll}
#1
\end{array}\right.}

\newcommand{\Pow}[1]{\fun{\mathcal{P}}{#1}}
\newcommand{\Prob}[1]{\funf{\Pr}{#1}}
\newcommand{\Count}[1]{\funf{\#}{#1}}
\newcommand{\krdelta}[1]{\fun{\delta}{#1}}

%\newcommand{\gets}{\ensuremath{\leftarrow}}

\newcommand{\refmoth}[3]{#1~\ref{#2:#3}}
\newcommand{\tblref}[1]{\refmoth{Table}{tbl}{#1}}
\newcommand{\figref}[1]{\refmoth{Figure}{fig}{#1}}
\newcommand{\algref}[1]{\refmoth{Algorithm}{alg}{#1}}

\newcommand{\newSt}[4]{\node[state,#3](#1)[#4]{#2};}
\newcommand{\newLo}[3]{\path[->] (#1) edge [loop above,#3] node[above,sloped,midway] {#2} (#1);} 
\newcommand{\newTr}[4]{\path[->] (#1) edge [#4] node[above,sloped,midway] {#3} (#2);}

\newcommand{\conv}[2]{\emph{#1$\rightarrow$#2}}

\newcommand{\algostyle}[1]{\textsc{#1}}

\newcommand{\contenttable}[5]{
\begin{table}[hbt]
\centering
\begin{tabular}{#1}
\toprule
#4\\\midrule
#5\\\bottomrule
\end{tabular}
\caption{#3.}
\label{tbl:#2}
\end{table}
}
\newcommand{\importfsm}[2]{
\begin{figure}[hbt]
\centering
\begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=4cm and 1cm]
\input{automata/#1.tex}
\end{tikzpicture}
\caption{#2.}
\label{fig:#1}
\end{figure}
}
\newcommand{\importalgo}[2]{
\begin{algorithm}[hbt]
\input{algorithms/#1.tex}
\caption{#2.}
\label{alg:#1}
\end{algorithm}
}
\newcommand{\importgram}[1]{
\begin{grammar}[(colon){$\rightarrow$}][(semicolon)$|$][(comma){}][(period){\\}][(quote){\begin{bf}}{\end{bf}}][(nonterminal){$\langle$}{$\rangle$}]
%\begin{rail}
\input{grammars/#1.tex}
%\end{rail}
\end{grammar}
}

\DeclareMathOperator{\argmax}{argmax}